import{z as pe,a as me,r as m,A as ce,L as fe,a8 as _e,d,K as T,o as _,c as F,C as r,D as L,f as l,e,w as n,i as I,B as Y,m as g,j as v,k as G,x as M,M as be,N as ge,a9 as ve,s as he}from"./index.47c6a412.js";import{a as ye,b as we,s as Ne,p as Ce,d as ke}from"./gen.5c248511.js";import Ve from"./importTable.59a076ad.js";const xe={class:"app-container"},Se=pe({name:"Gen"}),Re=Object.assign(Se,{setup($e){const R=me(),{proxy:u}=he(),U=m([]),S=m(!0),k=m(!0),$=m([]),q=m(!0),K=m(!0),D=m(0),z=m([]),h=m([]),P=m(""),Q=ce({queryParams:{pageNum:1,pageSize:10,tableName:void 0,tableComment:void 0,dataName:"master"},preview:{open:!1,title:"\u4EE3\u7801\u9884\u89C8",data:{},activeName:"domain.java"}}),{queryParams:i,preview:c}=fe(Q);localStorage.setItem("dataName",i.value.dataName),_e(()=>{const o=R.query.t;o!=null&&o!=P.value&&(P.value=o,i.value.pageNum=Number(R.query.pageNum),h.value=[],u.resetForm("queryForm"),y())});function y(){S.value=!0,ye(u.addDateRange(i.value,h.value)).then(o=>{U.value=o.rows,D.value=o.total,S.value=!1})}function w(){localStorage.setItem("dataName",i.value.dataName),i.value.pageNum=1,y()}function O(o){const t=o.tableName||z.value;if(t==""){u.$modal.msgError("\u8BF7\u9009\u62E9\u8981\u751F\u6210\u7684\u6570\u636E");return}o.genType==="1"?we(o.tableName).then(V=>{u.$modal.msgSuccess("\u6210\u529F\u751F\u6210\u5230\u81EA\u5B9A\u4E49\u8DEF\u5F84\uFF1A"+o.genPath)}):u.$download.zip("/tool/gen/batchGenCode?tables="+t,"metabot.zip")}function A(o){const t=o.tableName;u.$modal.confirm('\u786E\u8BA4\u8981\u5F3A\u5236\u540C\u6B65"'+t+'"\u8868\u7ED3\u6784\u5417\uFF1F').then(function(){return Ne(t)}).then(()=>{u.$modal.msgSuccess("\u540C\u6B65\u6210\u529F")}).catch(()=>{})}function H(){u.$refs.importRef.show()}function J(){h.value=[],u.resetForm("queryRef"),w()}function W(o){Ce(o.tableId).then(t=>{c.value.data=t.data,c.value.open=!0,c.value.activeName="domain.java"})}function X(){u.$modal.msgSuccess("\u590D\u5236\u6210\u529F")}function Z(o){$.value=o.map(t=>t.tableId),z.value=o.map(t=>t.tableName),q.value=o.length!=1,K.value=!o.length}function B(o){const t=o.tableId||$.value[0];ve.push({path:"/tool/gen-edit/index/"+t,query:{pageNum:i.value.pageNum}})}function E(o){const t=o.tableId||$.value;u.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u8868\u7F16\u53F7\u4E3A"'+t+'"\u7684\u6570\u636E\u9879\uFF1F').then(function(){return ke(t)}).then(()=>{y(),u.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}return y(),(o,t)=>{const V=d("el-input"),N=d("el-form-item"),ee=d("el-date-picker"),s=d("el-button"),te=d("el-form"),x=d("el-col"),ae=d("right-toolbar"),le=d("el-row"),b=d("el-table-column"),C=d("el-tooltip"),ne=d("el-table"),oe=d("pagination"),ie=d("el-link"),de=d("el-tab-pane"),re=d("el-tabs"),ue=d("el-dialog"),f=T("hasPermi"),se=T("loading"),j=T("copyText");return _(),F("div",xe,[r(e(te,{model:l(i),ref:"queryRef",inline:!0},{default:n(()=>[e(N,{label:"\u6570\u636E\u6E90",prop:"dataName"},{default:n(()=>[e(V,{modelValue:l(i).dataName,"onUpdate:modelValue":t[0]||(t[0]=a=>l(i).dataName=a),placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u6E90\u540D\u79F0",clearable:"",style:{width:"200px"},onKeyup:I(w,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(N,{label:"\u8868\u540D\u79F0",prop:"tableName"},{default:n(()=>[e(V,{modelValue:l(i).tableName,"onUpdate:modelValue":t[1]||(t[1]=a=>l(i).tableName=a),placeholder:"\u8BF7\u8F93\u5165\u8868\u540D\u79F0",clearable:"",style:{width:"200px"},onKeyup:I(w,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(N,{label:"\u8868\u63CF\u8FF0",prop:"tableComment"},{default:n(()=>[e(V,{modelValue:l(i).tableComment,"onUpdate:modelValue":t[2]||(t[2]=a=>l(i).tableComment=a),placeholder:"\u8BF7\u8F93\u5165\u8868\u63CF\u8FF0",clearable:"",style:{width:"200px"},onKeyup:I(w,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(N,{label:"\u521B\u5EFA\u65F6\u95F4",style:{width:"308px"}},{default:n(()=>[e(ee,{modelValue:l(h),"onUpdate:modelValue":t[3]||(t[3]=a=>Y(h)?h.value=a:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F"},null,8,["modelValue"])]),_:1}),e(N,null,{default:n(()=>[e(s,{type:"primary",icon:"Search",onClick:w},{default:n(()=>[g("\u641C\u7D22")]),_:1}),e(s,{icon:"Refresh",onClick:J},{default:n(()=>[g("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[L,l(k)]]),e(le,{gutter:10,class:"mb8"},{default:n(()=>[e(x,{span:1.5},{default:n(()=>[r((_(),v(s,{type:"primary",plain:"",icon:"Download",onClick:O},{default:n(()=>[g("\u751F\u6210")]),_:1})),[[f,["tool:gen:code"]]])]),_:1},8,["span"]),e(x,{span:1.5},{default:n(()=>[r((_(),v(s,{type:"info",plain:"",icon:"Upload",onClick:H},{default:n(()=>[g("\u5BFC\u5165")]),_:1})),[[f,["tool:gen:import"]]])]),_:1},8,["span"]),e(x,{span:1.5},{default:n(()=>[r((_(),v(s,{type:"success",plain:"",icon:"Edit",disabled:l(q),onClick:B},{default:n(()=>[g("\u4FEE\u6539")]),_:1},8,["disabled"])),[[f,["tool:gen:edit"]]])]),_:1},8,["span"]),e(x,{span:1.5},{default:n(()=>[r((_(),v(s,{type:"danger",plain:"",icon:"Delete",disabled:l(K),onClick:E},{default:n(()=>[g("\u5220\u9664")]),_:1},8,["disabled"])),[[f,["tool:gen:remove"]]])]),_:1},8,["span"]),e(ae,{showSearch:l(k),"onUpdate:showSearch":t[4]||(t[4]=a=>Y(k)?k.value=a:null),onQueryTable:y},null,8,["showSearch"])]),_:1}),r((_(),v(ne,{data:l(U),onSelectionChange:Z},{default:n(()=>[e(b,{type:"selection",align:"center",width:"55"}),e(b,{label:"\u5E8F\u53F7",type:"index",width:"50",align:"center"},{default:n(a=>[G("span",null,M((l(i).pageNum-1)*l(i).pageSize+a.$index+1),1)]),_:1}),e(b,{label:"\u8868\u540D\u79F0",align:"center",prop:"tableName","show-overflow-tooltip":!0}),e(b,{label:"\u8868\u63CF\u8FF0",align:"center",prop:"tableComment","show-overflow-tooltip":!0}),e(b,{label:"\u5B9E\u4F53",align:"center",prop:"className","show-overflow-tooltip":!0}),e(b,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"160"}),e(b,{label:"\u66F4\u65B0\u65F6\u95F4",align:"center",prop:"updateTime",width:"160"}),e(b,{label:"\u64CD\u4F5C",align:"center",width:"330","class-name":"small-padding fixed-width"},{default:n(a=>[e(C,{content:"\u9884\u89C8",placement:"top"},{default:n(()=>[r(e(s,{link:"",type:"primary",icon:"View",onClick:p=>W(a.row)},null,8,["onClick"]),[[f,["tool:gen:preview"]]])]),_:2},1024),e(C,{content:"\u7F16\u8F91",placement:"top"},{default:n(()=>[r(e(s,{link:"",type:"primary",icon:"Edit",onClick:p=>B(a.row)},null,8,["onClick"]),[[f,["tool:gen:edit"]]])]),_:2},1024),e(C,{content:"\u5220\u9664",placement:"top"},{default:n(()=>[r(e(s,{link:"",type:"primary",icon:"Delete",onClick:p=>E(a.row)},null,8,["onClick"]),[[f,["tool:gen:remove"]]])]),_:2},1024),e(C,{content:"\u540C\u6B65",placement:"top"},{default:n(()=>[r(e(s,{link:"",type:"primary",icon:"Refresh",onClick:p=>A(a.row)},null,8,["onClick"]),[[f,["tool:gen:edit"]]])]),_:2},1024),e(C,{content:"\u751F\u6210\u4EE3\u7801",placement:"top"},{default:n(()=>[r(e(s,{link:"",type:"primary",icon:"Download",onClick:p=>O(a.row)},null,8,["onClick"]),[[f,["tool:gen:code"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[se,l(S)]]),r(e(oe,{total:l(D),page:l(i).pageNum,"onUpdate:page":t[5]||(t[5]=a=>l(i).pageNum=a),limit:l(i).pageSize,"onUpdate:limit":t[6]||(t[6]=a=>l(i).pageSize=a),onPagination:y},null,8,["total","page","limit"]),[[L,l(D)>0]]),e(ue,{title:l(c).title,modelValue:l(c).open,"onUpdate:modelValue":t[8]||(t[8]=a=>l(c).open=a),width:"80%",top:"5vh","append-to-body":"",class:"scrollbar"},{default:n(()=>[e(re,{modelValue:l(c).activeName,"onUpdate:modelValue":t[7]||(t[7]=a=>l(c).activeName=a)},{default:n(()=>[(_(!0),F(be,null,ge(l(c).data,(a,p)=>(_(),v(de,{label:p.substring(p.lastIndexOf("/")+1,p.indexOf(".vm")),name:p.substring(p.lastIndexOf("/")+1,p.indexOf(".vm")),key:a},{default:n(()=>[r((_(),v(ie,{underline:!1,icon:"DocumentCopy",style:{float:"right"}},{default:n(()=>[g("\xA0\u590D\u5236")]),_:2},1024)),[[j,a],[j,X,"callback"]]),G("pre",null,M(a),1)]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["title","modelValue"]),e(l(Ve),{ref:"importRef",onOk:w},null,512)])}}});export{Re as default};
